<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Console Log Monitor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        #console-output {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 5px;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        #network-output {
            background-color: #f0f8ff;
            border: 1px solid #add8e6;
            padding: 10px;
            border-radius: 5px;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .log-item {
            margin-bottom: 5px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        .log-info { color: #333; }
        .log-warn { color: #f90; }
        .log-error { color: #f00; }
        .log-debug { color: #090; }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
        h2 {
            margin-top: 30px;
        }
        .instructions {
            background-color: #fffaf0;
            border: 1px solid #ffe4b5;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Console Log Monitor</h1>
    
    <div class="instructions">
        <h3>Instructions:</h3>
        <ol>
            <li>Open the AI Chef app in another tab</li>
            <li>Open the browser's developer tools (F12 or right-click > Inspect)</li>
            <li>Go to the Console tab</li>
            <li>Enter this code to redirect console logs: <code>window.originalConsoleLog = console.log; console.log = function() { window.originalConsoleLog.apply(console, arguments); window.opener.postMessage({type: 'console', level: 'log', args: Array.from(arguments).map(arg => typeof arg === 'object' ? JSON.stringify(arg) : arg)}, '*'); };</code></li>
            <li>Generate a recipe and click the "Generate Walmart Shopping Cart" button</li>
            <li>Watch the logs appear in this window</li>
        </ol>
    </div>
    
    <button id="clear-logs">Clear Logs</button>
    
    <h2>Console Output</h2>
    <div id="console-output"></div>
    
    <h2>Network Requests</h2>
    <div id="network-output"></div>
    
    <script>
        const consoleOutput = document.getElementById('console-output');
        const networkOutput = document.getElementById('network-output');
        const clearLogsButton = document.getElementById('clear-logs');
        
        // Listen for messages from other windows
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'console') {
                const logItem = document.createElement('div');
                logItem.className = `log-item log-${event.data.level}`;
                
                // Format the log message
                let logText = '';
                if (Array.isArray(event.data.args)) {
                    logText = event.data.args.join(' ');
                } else {
                    logText = String(event.data.args);
                }
                
                logItem.textContent = logText;
                consoleOutput.appendChild(logItem);
                consoleOutput.scrollTop = consoleOutput.scrollHeight;
            } else if (event.data && event.data.type === 'network') {
                const logItem = document.createElement('div');
                logItem.className = 'log-item';
                logItem.textContent = `${event.data.method} ${event.data.url}`;
                if (event.data.response) {
                    logItem.textContent += `\nResponse: ${event.data.response}`;
                }
                networkOutput.appendChild(logItem);
                networkOutput.scrollTop = networkOutput.scrollHeight;
            }
        });
        
        // Clear logs button
        clearLogsButton.addEventListener('click', function() {
            consoleOutput.innerHTML = '';
            networkOutput.innerHTML = '';
        });
        
        // Add instructions for network monitoring
        consoleOutput.innerHTML = 'Console logs will appear here when received from the app.\n\nMake sure to run the code from the instructions in the app\'s console.';
        networkOutput.innerHTML = 'Network requests will appear here when received from the app.';
    </script>
</body>
</html>