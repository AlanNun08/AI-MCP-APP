/*! For license information please see main.c93b6bab.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),l=n(950);function i(e){var t="https://390faeca-fe6c-42c5-afe1-d1d19d490134.preview.emergentagent.com",[t,n]=(0,a.useState)("landing"),[r,l]=(0,a.useState)(null),[i,o]=(0,a.useState)([]),[s,u]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[g,y]=(0,a.useState)(null),[b,v]=(0,a.useState)(null),x=function(e){h({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout((()=>h(null)),4e3)},w=()=>(0,xt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center p-4",children:(0,xt.jsxs)("div",{className:"text-center max-w-md",children:[(0,xt.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,xt.jsx)("h1",{className:"text-4xl font-bold text-white mb-2 drop-shadow-lg",children:"AI Chef"}),(0,xt.jsx)("p",{className:"text-xl text-white mb-8 opacity-90 leading-relaxed",children:"Personalized recipes with instant grocery delivery"}),(0,xt.jsxs)("div",{className:"space-y-4",children:[(0,xt.jsx)("button",{onClick:()=>n("register"),className:"w-full bg-white text-green-600 font-semibold py-4 px-8 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 hover:bg-gray-50 active:scale-95",children:"\u2728 Get Started"}),(0,xt.jsx)("button",{onClick:()=>n("login"),className:"w-full bg-transparent border-2 border-white text-white font-semibold py-4 px-8 rounded-2xl hover:bg-white hover:text-green-600 transition-all duration-200 active:scale-95",children:"\ud83d\udd11 I Have an Account"})]}),(0,xt.jsx)("div",{className:"mt-8 text-white/70 text-sm",children:(0,xt.jsx)("p",{children:"\ud83e\udd16 AI-powered \u2022 \ud83d\uded2 Walmart delivery \u2022 \ud83c\udf43 Healthy options"})})]})}),k=()=>{const[t,r]=(0,a.useState)({first_name:"",last_name:"",email:"",password:"",confirmPassword:"",dietary_preferences:[],allergies:[],favorite_cuisines:[]}),[l,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)(!1),u=(e,t,n)=>{n(e.includes(t)?e.filter((e=>e!==t)):[...e,t])};return(0,xt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center p-4",children:(0,xt.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,xt.jsxs)("div",{className:"text-center mb-6",children:[(0,xt.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,xt.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Create Your Account"}),(0,xt.jsx)("p",{className:"text-gray-600",children:"Join AI Chef today!"})]}),(0,xt.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),!t.first_name||!t.last_name||!t.email||!t.password)return void x("\u274c Please fill in all required fields","error");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email))if(t.password.length<6)x("\u274c Password must be at least 6 characters","error");else if(t.password===t.confirmPassword){i(!0);try{const r={first_name:t.first_name,last_name:t.last_name,email:t.email,password:t.password,dietary_preferences:t.dietary_preferences,allergies:t.allergies,favorite_cuisines:t.favorite_cuisines};await vt.post(`${e}/api/auth/register`,r);y(t.email),n("verify-email"),x("\u2705 Registration successful! Check your email for verification code","success")}catch(o){var a,l;console.error("Registration failed:",o);const e=(null===(a=o.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.detail)||"Registration failed. Please try again.";x(`\u274c ${e}`,"error")}finally{i(!1)}}else x("\u274c Passwords do not match","error");else x("\u274c Please enter a valid email address","error")},className:"space-y-4",children:[(0,xt.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,xt.jsx)("input",{type:"text",placeholder:"John",value:t.first_name,onChange:e=>r({...t,first_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",required:!0})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,xt.jsx)("input",{type:"text",placeholder:"Doe",value:t.last_name,onChange:e=>r({...t,last_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",required:!0})]})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),(0,xt.jsx)("input",{type:"email",placeholder:"john.doe@example.com",value:t.email,onChange:e=>r({...t,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",required:!0})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),(0,xt.jsxs)("div",{className:"relative",children:[(0,xt.jsx)("input",{type:o?"text":"password",placeholder:"At least 6 characters",value:t.password,onChange:e=>r({...t,password:e.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",required:!0,minLength:6}),(0,xt.jsx)("button",{type:"button",onClick:()=>s(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:o?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"}),(0,xt.jsx)("input",{type:"password",placeholder:"Confirm your password",value:t.confirmPassword,onChange:e=>r({...t,confirmPassword:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm",required:!0})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dietary Preferences"}),(0,xt.jsx)("div",{className:"grid grid-cols-2 gap-1",children:["vegetarian","vegan","gluten-free","dairy-free","keto","paleo"].map((e=>(0,xt.jsxs)("label",{className:"flex items-center space-x-2 p-1 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,xt.jsx)("input",{type:"checkbox",checked:t.dietary_preferences.includes(e),onChange:()=>u(t.dietary_preferences,e,(e=>r({...t,dietary_preferences:e}))),className:"rounded text-green-500"}),(0,xt.jsx)("span",{className:"text-xs capitalize",children:e})]},e)))})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allergies"}),(0,xt.jsx)("div",{className:"grid grid-cols-2 gap-1",children:["nuts","shellfish","eggs","dairy","soy","wheat"].map((e=>(0,xt.jsxs)("label",{className:"flex items-center space-x-2 p-1 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,xt.jsx)("input",{type:"checkbox",checked:t.allergies.includes(e),onChange:()=>u(t.allergies,e,(e=>r({...t,allergies:e}))),className:"rounded text-red-500"}),(0,xt.jsx)("span",{className:"text-xs capitalize",children:e})]},e)))})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Favorite Cuisines"}),(0,xt.jsx)("div",{className:"grid grid-cols-2 gap-1",children:["italian","mexican","chinese","indian","mediterranean","american"].map((e=>(0,xt.jsxs)("label",{className:"flex items-center space-x-2 p-1 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,xt.jsx)("input",{type:"checkbox",checked:t.favorite_cuisines.includes(e),onChange:()=>u(t.favorite_cuisines,e,(e=>r({...t,favorite_cuisines:e}))),className:"rounded text-blue-500"}),(0,xt.jsx)("span",{className:"text-xs capitalize",children:e})]},e)))})]}),(0,xt.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold py-3 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:l?(0,xt.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,xt.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,xt.jsx)("span",{children:"Creating Account..."})]}):"\u2728 Create Account"})]}),(0,xt.jsx)("button",{onClick:()=>n("landing"),className:"w-full mt-4 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:"\u2190 Back to Home"})]})})},S=()=>{const[t,r]=(0,a.useState)(""),[i,o]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1),[c,d]=(0,a.useState)(300);(0,a.useEffect)((()=>{if(c>0){const e=setTimeout((()=>d(c-1)),1e3);return()=>clearTimeout(e)}}),[c]);const f=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return(0,xt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center p-4",children:(0,xt.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 w-full max-w-md",children:[(0,xt.jsxs)("div",{className:"text-center mb-8",children:[(0,xt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udce7"}),(0,xt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Check Your Email"}),(0,xt.jsxs)("p",{className:"text-gray-600 text-sm",children:["We sent a 6-digit verification code to",(0,xt.jsx)("br",{}),(0,xt.jsx)("strong",{children:g})]})]}),(0,xt.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),t&&6===t.length){o(!0);try{const r=await vt.post(`${e}/api/auth/verify`,{email:g,code:t});l(r.data.user),n("dashboard"),x("\ud83c\udf89 Email verified successfully! Welcome to AI Chef!","success")}catch(s){var a,i;console.error("Verification failed:",s);const e=(null===(a=s.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.detail)||"Verification failed. Please try again.";x(`\u274c ${e}`,"error")}finally{o(!1)}}else x("\u274c Please enter a 6-digit verification code","error")},className:"space-y-6",children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3 text-center",children:"Enter Verification Code"}),(0,xt.jsx)("input",{type:"text",placeholder:"123456",value:t,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,6);r(t)},className:"w-full px-4 py-4 text-center text-2xl font-mono border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent tracking-widest",maxLength:6,autoComplete:"one-time-code",autoFocus:!0}),(0,xt.jsx)("div",{className:"text-center mt-3",children:c>0?(0,xt.jsxs)("p",{className:"text-sm text-gray-500",children:["Code expires in: ",(0,xt.jsx)("span",{className:"font-mono text-red-500",children:f(c)})]}):(0,xt.jsx)("p",{className:"text-sm text-red-500",children:"Code has expired"})})]}),(0,xt.jsx)("button",{type:"submit",disabled:i||6!==t.length,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:i?(0,xt.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,xt.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,xt.jsx)("span",{children:"Verifying..."})]}):"\u2705 Verify Email"})]}),(0,xt.jsxs)("div",{className:"mt-6 text-center",children:[(0,xt.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Didn't receive the code?"}),(0,xt.jsx)("button",{onClick:async()=>{u(!0);try{await vt.post(`${e}/api/auth/resend-code`,{email:g}),d(300),r(""),x("\ud83d\udce7 New verification code sent!","success")}catch(a){var t,n;console.error("Resend failed:",a);const e=(null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Failed to resend code. Please try again.";x(`\u274c ${e}`,"error")}finally{u(!1)}},disabled:s||c>240,className:"text-blue-600 hover:text-blue-800 font-medium text-sm underline disabled:text-gray-400 disabled:no-underline",children:s?(0,xt.jsxs)("span",{className:"flex items-center justify-center space-x-1",children:[(0,xt.jsx)("div",{className:"w-3 h-3 border border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,xt.jsx)("span",{children:"Sending..."})]}):c>240?`Resend available in ${f(c-240)}`:"\ud83d\udce4 Resend Code"})]}),(0,xt.jsx)("button",{onClick:()=>{n("register"),y(null)},className:"w-full mt-6 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:"\u2190 Back to Registration"})]})})},N=()=>{const[t,r]=(0,a.useState)({email:"",password:""}),[i,o]=(0,a.useState)(!1),[s,u]=(0,a.useState)(!1);return(0,xt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center p-4",children:(0,xt.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 w-full max-w-md",children:[(0,xt.jsxs)("div",{className:"text-center mb-8",children:[(0,xt.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,xt.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Welcome Back"}),(0,xt.jsx)("p",{className:"text-gray-600",children:"Sign in to your account"})]}),(0,xt.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),t.email&&t.password){o(!0);try{const r=await vt.post(`${e}/api/auth/login`,t);if("unverified"===r.data.status&&r.data.needs_verification)return y(r.data.email),n("verify-email"),void x("\ud83d\udce7 Please verify your email to continue","error");"success"===r.data.status&&(l(r.data.user),n("dashboard"),x(`\ud83c\udf89 Welcome back, ${r.data.user.first_name}!`,"success"))}catch(s){var a,i;console.error("Login failed:",s);const e=(null===(a=s.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.detail)||"Login failed. Please check your credentials.";x(`\u274c ${e}`,"error")}finally{o(!1)}}else x("\u274c Please enter both email and password","error")},className:"space-y-6",children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,xt.jsx)("input",{type:"email",placeholder:"john.doe@example.com",value:t.email,onChange:e=>r({...t,email:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,xt.jsxs)("div",{className:"relative",children:[(0,xt.jsx)("input",{type:s?"text":"password",placeholder:"Enter your password",value:t.password,onChange:e=>r({...t,password:e.target.value}),className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0}),(0,xt.jsx)("button",{type:"button",onClick:()=>u(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:s?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]})]}),(0,xt.jsx)("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:i?(0,xt.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,xt.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,xt.jsx)("span",{children:"Signing In..."})]}):"\ud83d\udd11 Sign In"})]}),(0,xt.jsxs)("div",{className:"mt-6 text-center space-y-3",children:[(0,xt.jsx)("button",{onClick:()=>n("forgot-password"),className:"text-sm text-blue-600 hover:text-blue-800 font-medium underline",children:"\ud83d\udd12 Forgot your password?"}),(0,xt.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,xt.jsx)("button",{onClick:()=>n("register"),className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Sign up here"})]})]}),(0,xt.jsx)("button",{onClick:()=>n("landing"),className:"w-full mt-4 text-gray-600 hover:text-gray-800 transition-colors",children:"\u2190 Back to Home"})]})})},j=()=>(0,xt.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,xt.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,xt.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-4",children:[(0,xt.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,xt.jsx)("div",{className:"text-3xl",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,xt.jsxs)("div",{children:[(0,xt.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Hi, ",null===r||void 0===r?void 0:r.first_name,"!"]}),(0,xt.jsx)("p",{className:"text-gray-600 text-sm",children:"Ready to cook something amazing?"}),(null===r||void 0===r?void 0:r.is_verified)&&(0,xt.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mt-1",children:"\u2705 Verified"})]})]}),(0,xt.jsxs)("div",{className:"space-y-3",children:[(0,xt.jsx)("button",{onClick:()=>n("generate-recipe"),className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 active:scale-95",children:"\ud83c\udfaf Generate AI Recipe"}),(0,xt.jsx)("button",{onClick:()=>n("all-recipes"),className:"w-full bg-purple-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 active:scale-95",children:"\ud83d\udcda Recipe History"})]})]}),(0,xt.jsxs)("div",{className:"bg-gradient-to-r from-green-100 to-blue-100 rounded-2xl p-4 mb-4",children:[(0,xt.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"\ud83c\udf1f Welcome to AI Chef!"}),(0,xt.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,xt.jsx)("p",{children:"\u2022 Generate personalized recipes with AI"}),(0,xt.jsx)("p",{children:"\u2022 Instant Walmart grocery delivery"}),(0,xt.jsx)("p",{children:"\u2022 Healthy & budget-friendly options"})]})]}),(0,xt.jsx)("button",{onClick:()=>{l(null),y(null),n("landing"),x("\ud83d\udc4b Signed out successfully","success")},className:"w-full text-gray-500 hover:text-gray-700 transition-colors py-2",children:"\ud83d\udeaa Sign Out"})]})}),E=()=>{const[t,r]=(0,a.useState)(""),[l,i]=(0,a.useState)(!1);return(0,xt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center p-4",children:(0,xt.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 w-full max-w-md",children:[(0,xt.jsxs)("div",{className:"text-center mb-8",children:[(0,xt.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd12"}),(0,xt.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Forgot Password?"}),(0,xt.jsx)("p",{className:"text-gray-600",children:"No worries! We'll send you a reset code"})]}),(0,xt.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),!t)return void x("\u274c Please enter your email address","error");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){i(!0);try{await vt.post(`${e}/api/auth/forgot-password`,{email:t}),v(t),n("reset-password"),x("\ud83d\udce7 Password reset code sent! Check your email","success")}catch(a){console.error("Password reset request failed:",a),v(t),n("reset-password"),x("\ud83d\udce7 If an account exists, a reset code has been sent","success")}finally{i(!1)}}else x("\u274c Please enter a valid email address","error")},className:"space-y-6",children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,xt.jsx)("input",{type:"email",placeholder:"Enter your email address",value:t,onChange:e=>r(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,xt.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-gradient-to-r from-red-500 to-orange-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:l?(0,xt.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,xt.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,xt.jsx)("span",{children:"Sending Reset Code..."})]}):"\ud83d\udce7 Send Reset Code"})]}),(0,xt.jsx)("div",{className:"mt-6 text-center",children:(0,xt.jsxs)("p",{className:"text-sm text-gray-600",children:["Remember your password?"," ",(0,xt.jsx)("button",{onClick:()=>n("login"),className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"Sign in here"})]})}),(0,xt.jsx)("button",{onClick:()=>n("landing"),className:"w-full mt-4 text-gray-600 hover:text-gray-800 transition-colors",children:"\u2190 Back to Home"})]})})},_=()=>{const[t,r]=(0,a.useState)({resetCode:"",newPassword:"",confirmPassword:""}),[l,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)(!1),[u,c]=(0,a.useState)(600);(0,a.useEffect)((()=>{if(u>0){const e=setTimeout((()=>c(u-1)),1e3);return()=>clearTimeout(e)}}),[u]);const d=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return(0,xt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center p-4",children:(0,xt.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 w-full max-w-md",children:[(0,xt.jsxs)("div",{className:"text-center mb-8",children:[(0,xt.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd11"}),(0,xt.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Reset Password"}),(0,xt.jsxs)("p",{className:"text-gray-600 text-sm",children:["Enter the 6-digit code sent to",(0,xt.jsx)("br",{}),(0,xt.jsx)("strong",{children:b})]})]}),(0,xt.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),t.resetCode&&t.newPassword&&t.confirmPassword)if(6===t.resetCode.length)if(t.newPassword.length<6)x("\u274c Password must be at least 6 characters","error");else if(t.newPassword===t.confirmPassword){i(!0);try{await vt.post(`${e}/api/auth/reset-password`,{email:b,reset_code:t.resetCode,new_password:t.newPassword}),n("login"),x("\u2705 Password reset successful! Please login with your new password","success")}catch(o){var a,l;console.error("Password reset failed:",o);const e=(null===(a=o.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.detail)||"Password reset failed. Please try again.";x(`\u274c ${e}`,"error")}finally{i(!1)}}else x("\u274c Passwords do not match","error");else x("\u274c Please enter a 6-digit reset code","error");else x("\u274c Please fill in all fields","error")},className:"space-y-6",children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-center",children:"Reset Code"}),(0,xt.jsx)("input",{type:"text",placeholder:"123456",value:t.resetCode,onChange:e=>{const n=e.target.value.replace(/\D/g,"").slice(0,6);r({...t,resetCode:n})},className:"w-full px-4 py-3 text-center text-xl font-mono border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent tracking-widest",maxLength:6,autoComplete:"one-time-code"}),(0,xt.jsx)("div",{className:"text-center mt-2",children:u>0?(0,xt.jsxs)("p",{className:"text-sm text-gray-500",children:["Code expires in: ",(0,xt.jsx)("span",{className:"font-mono text-red-500",children:d(u)})]}):(0,xt.jsx)("p",{className:"text-sm text-red-500",children:"Code has expired"})})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,xt.jsxs)("div",{className:"relative",children:[(0,xt.jsx)("input",{type:o?"text":"password",placeholder:"Enter new password (min 6 characters)",value:t.newPassword,onChange:e=>r({...t,newPassword:e.target.value}),className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0,minLength:6}),(0,xt.jsx)("button",{type:"button",onClick:()=>s(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:o?"\ud83d\ude48":"\ud83d\udc41\ufe0f"})]})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,xt.jsx)("input",{type:o?"text":"password",placeholder:"Confirm your new password",value:t.confirmPassword,onChange:e=>r({...t,confirmPassword:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0})]}),(0,xt.jsx)("button",{type:"submit",disabled:l||6!==t.resetCode.length,className:"w-full bg-gradient-to-r from-red-500 to-orange-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:l?(0,xt.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,xt.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,xt.jsx)("span",{children:"Resetting Password..."})]}):"\ud83d\udd11 Reset Password"})]}),(0,xt.jsxs)("div",{className:"mt-6 text-center",children:[(0,xt.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Didn't receive the code?"}),(0,xt.jsx)("button",{onClick:async()=>{try{await vt.post(`${e}/api/auth/forgot-password`,{email:b}),c(600),r({...t,resetCode:""}),x("\ud83d\udce7 New reset code sent!","success")}catch(n){x("\ud83d\udce7 If an account exists, a new reset code has been sent","success")}},disabled:u>540,className:"text-blue-600 hover:text-blue-800 font-medium text-sm underline disabled:text-gray-400 disabled:no-underline",children:u>540?`Resend available in ${d(u-540)}`:"\ud83d\udce4 Resend Reset Code"})]}),(0,xt.jsx)("button",{onClick:()=>{n("login"),v(null)},className:"w-full mt-6 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:"\u2190 Back to Login"})]})})},C=()=>{const[t,l]=(0,a.useState)({recipe_type:"",cuisine_type:"",snack_type:"",beverage_type:"",dietary_preferences:[],ingredients_on_hand:"",prep_time_max:"",servings:4,difficulty:"medium",is_healthy:!1,max_calories_per_serving:400,is_budget_friendly:!1,max_budget:20}),[i,o]=(0,a.useState)(!1);return(0,xt.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,xt.jsx)("div",{className:"max-w-md mx-auto",children:(0,xt.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 mb-4",children:[(0,xt.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,xt.jsx)("button",{onClick:()=>n("dashboard"),className:"text-gray-600 hover:text-gray-800",children:"\u2190 Back"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\ud83e\udd16 Generate AI Recipe"}),(0,xt.jsx)("p",{className:"text-gray-600 text-sm",children:"Create a personalized recipe just for you"})]})]}),(0,xt.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),!t.recipe_type)return void x("\u274c Please select a recipe category (Cuisine, Snack, or Beverage)","error");let l="";if("cuisine"!==t.recipe_type||t.cuisine_type)if("snack"!==t.recipe_type||t.snack_type)if("beverage"!==t.recipe_type||t.beverage_type){"cuisine"===t.recipe_type?l=t.cuisine_type:"snack"===t.recipe_type?l=t.snack_type:"beverage"===t.recipe_type&&(l=t.beverage_type),o(!0);try{const a={user_id:r.id,recipe_category:t.recipe_type,cuisine_type:l,dietary_preferences:t.dietary_preferences,ingredients_on_hand:t.ingredients_on_hand?t.ingredients_on_hand.split(",").map((e=>e.trim())):[],prep_time_max:t.prep_time_max?parseInt(t.prep_time_max):null,servings:t.servings,difficulty:t.difficulty,is_healthy:t.is_healthy,max_calories_per_serving:t.is_healthy?t.max_calories_per_serving:null,is_budget_friendly:t.is_budget_friendly,max_budget:t.is_budget_friendly?t.max_budget:null},i=await vt.post(`${e}/api/recipes/generate`,a);window.currentRecipe=i.data,n("recipe-detail"),x("\ud83c\udf89 Recipe generated successfully!","success")}catch(u){var i,s;console.error("Recipe generation failed:",u);const e=(null===(i=u.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.detail)||"Failed to generate recipe. Please try again.";x(`\u274c ${e}`,"error")}finally{o(!1)}}else x("\u274c Please select a beverage type","error");else x("\u274c Please select a snack type","error");else x("\u274c Please select a cuisine type","error")},className:"space-y-6",children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Recipe Category *"}),(0,xt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,xt.jsx)("div",{className:"border-2 rounded-xl p-4 cursor-pointer transition-all duration-200 "+("cuisine"===t.recipe_type?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"),onClick:()=>l({...t,recipe_type:"cuisine",snack_type:"",beverage_type:""}),children:(0,xt.jsxs)("div",{className:"text-center",children:[(0,xt.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf5d"}),(0,xt.jsx)("h3",{className:"font-bold text-gray-800",children:"Cuisine"}),(0,xt.jsx)("p",{className:"text-xs text-gray-600",children:"Traditional dishes from around the world"})]})}),(0,xt.jsx)("div",{className:"border-2 rounded-xl p-4 cursor-pointer transition-all duration-200 "+("snack"===t.recipe_type?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"),onClick:()=>l({...t,recipe_type:"snack",cuisine_type:"",beverage_type:""}),children:(0,xt.jsxs)("div",{className:"text-center",children:[(0,xt.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf6a"}),(0,xt.jsx)("h3",{className:"font-bold text-gray-800",children:"Snacks"}),(0,xt.jsx)("p",{className:"text-xs text-gray-600",children:"Healthy bowls, treats, and bite-sized delights"})]})}),(0,xt.jsx)("div",{className:"border-2 rounded-xl p-4 cursor-pointer transition-all duration-200 "+("beverage"===t.recipe_type?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"),onClick:()=>l({...t,recipe_type:"beverage",cuisine_type:"",snack_type:""}),children:(0,xt.jsxs)("div",{className:"text-center",children:[(0,xt.jsx)("div",{className:"text-3xl mb-2",children:"\ud83e\uddcb"}),(0,xt.jsx)("h3",{className:"font-bold text-gray-800",children:"Beverages"}),(0,xt.jsx)("p",{className:"text-xs text-gray-600",children:"Coffee, tea, smoothies, and specialty drinks"})]})})]})]}),"cuisine"===t.recipe_type&&(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cuisine Type *"}),(0,xt.jsxs)("select",{value:t.cuisine_type,onChange:e=>l({...t,cuisine_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[(0,xt.jsx)("option",{value:"",children:"Select cuisine..."}),["italian","mexican","chinese","indian","mediterranean","american","thai","japanese","french","korean"].map((e=>(0,xt.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))]})]}),"snack"===t.recipe_type&&(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Snack Type *"}),(0,xt.jsxs)("select",{value:t.snack_type,onChange:e=>l({...t,snack_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[(0,xt.jsx)("option",{value:"",children:"Select snack type..."}),["acai bowls","fruit lemon slices chili","frozen yogurt berry bites"].map((e=>(0,xt.jsx)("option",{value:e,children:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},e)))]})]}),"beverage"===t.recipe_type&&(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beverage Type *"}),(0,xt.jsxs)("select",{value:t.beverage_type,onChange:e=>l({...t,beverage_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[(0,xt.jsx)("option",{value:"",children:"Select beverage type..."}),["boba tea","thai tea","coffee","special lemonades"].map((e=>(0,xt.jsx)("option",{value:e,children:e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},e)))]})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dietary Preferences"}),(0,xt.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["vegetarian","vegan","gluten-free","dairy-free","keto","paleo"].map((e=>(0,xt.jsxs)("label",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,xt.jsx)("input",{type:"checkbox",checked:t.dietary_preferences.includes(e),onChange:()=>{return n=t.dietary_preferences,r=e,void(e=>l({...t,dietary_preferences:e}))(n.includes(r)?n.filter((e=>e!==r)):[...n,r]);var n,r},className:"rounded text-green-500"}),(0,xt.jsx)("span",{className:"text-sm capitalize",children:e})]},e)))})]}),(0,xt.jsxs)("div",{className:"bg-green-50 p-4 rounded-xl",children:[(0,xt.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,xt.jsx)("input",{type:"checkbox",checked:t.is_healthy,onChange:e=>l({...t,is_healthy:e.target.checked}),className:"rounded text-green-500"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("span",{className:"font-medium text-green-800",children:"\ud83c\udf43 Healthy Mode"}),(0,xt.jsx)("p",{className:"text-sm text-green-600",children:"Limit calories per serving"})]})]}),t.is_healthy&&(0,xt.jsxs)("div",{className:"mt-3",children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-green-700 mb-1",children:"Max Calories per Serving"}),(0,xt.jsx)("input",{type:"number",value:t.max_calories_per_serving,onChange:e=>l({...t,max_calories_per_serving:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500",min:"200",max:"800",placeholder:"400"})]})]}),(0,xt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,xt.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,xt.jsx)("input",{type:"checkbox",checked:t.is_budget_friendly,onChange:e=>l({...t,is_budget_friendly:e.target.checked}),className:"rounded text-blue-500"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("span",{className:"font-medium text-blue-800",children:"\ud83d\udcb0 Budget Mode"}),(0,xt.jsx)("p",{className:"text-sm text-blue-600",children:"Set maximum budget"})]})]}),t.is_budget_friendly&&(0,xt.jsxs)("div",{className:"mt-3",children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-1",children:"Max Budget ($)"}),(0,xt.jsx)("input",{type:"number",value:t.max_budget,onChange:e=>l({...t,max_budget:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"5",max:"100",placeholder:"20"})]})]}),(0,xt.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Servings"}),(0,xt.jsx)("input",{type:"number",value:t.servings,onChange:e=>l({...t,servings:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"1",max:"12"})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),(0,xt.jsx)("select",{value:t.difficulty,onChange:e=>l({...t,difficulty:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",children:["easy","medium","hard"].map((e=>(0,xt.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))})]})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ingredients on Hand (optional)"}),(0,xt.jsx)("input",{type:"text",value:t.ingredients_on_hand,onChange:e=>l({...t,ingredients_on_hand:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"chicken, rice, onions (comma separated)"})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Prep Time (optional)"}),(0,xt.jsx)("input",{type:"number",value:t.prep_time_max,onChange:e=>l({...t,prep_time_max:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"30 minutes"})]}),(0,xt.jsx)("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold py-4 px-6 rounded-2xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:i?(0,xt.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,xt.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,xt.jsx)("span",{children:"AI is cooking up your recipe..."})]}):"\ud83e\udd16 Generate Recipe"})]})]})})})},P=t=>{let{recipe:l,showBackButton:i=!1}=t;const[o,s]=(0,a.useState)({}),[u,c]=(0,a.useState)({}),[d,f]=(0,a.useState)([]),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var t,n;null!==l&&void 0!==l&&l.id&&((null===l||void 0===l||null===(t=l.shopping_list)||void 0===t?void 0:t.length)>0||(null===l||void 0===l||null===(n=l.ingredients)||void 0===n?void 0:n.length)>0)&&(g(!0),vt.post(`${e}/api/grocery/cart-options`,{},{params:{recipe_id:l.id,user_id:(null===r||void 0===r?void 0:r.id)||"demo_user"}}).then((e=>{if(console.log("\u2705 Cart options response:",e.data),e.data&&e.data.ingredient_options){const t={},n={},r=[];e.data.ingredient_options.forEach(((e,a)=>{const l=e.ingredient_name||e.original_ingredient;if(e.options&&e.options.length>0){t[l]=e.options;const a=e.options[0];n[l]=a.product_id,r.push({name:a.name||l,price:parseFloat(a.price)||2.99,quantity:1,product_id:a.product_id,ingredient_name:l})}})),s(t),c(n),f(r);const a=r.flatMap((e=>Array(e.quantity).fill(e.product_id)));m(`https://affil.walmart.com/cart/addToCart?items=${a.join(",")}`),console.log("\u2705 Product options loaded:",Object.keys(t).length,"ingredients")}else console.log("\u26a0\ufe0f Invalid API response, using mock data"),y()})).catch((e=>{console.error("\u274c Error fetching cart options:",e),y()})).finally((()=>{g(!1)})))}),[l,r]);const y=()=>{var e;const t=(null===l||void 0===l||null===(e=l.shopping_list)||void 0===e?void 0:e.length)>0?l.shopping_list:(null===l||void 0===l?void 0:l.ingredients)||[];if(t.length>0){const e=[3.99,2.49,5.99,1.89,4.49,2.99,6.99,3.49,1.99,4.99,2.79,5.49],n=t.map(((t,n)=>({name:t,price:e[n%e.length],quantity:1,product_id:`walmart-${n+1e3}`,ingredient_name:t})));f(n);const r=n.flatMap((e=>Array(e.quantity).fill(e.product_id)));m(`https://affil.walmart.com/cart/addToCart?items=${r.join(",")}`);const a={};t.forEach((t=>{a[t]=[{name:`${t} - Premium Brand`,price:e[0],product_id:`walmart-${t}-1`},{name:`${t} - Store Brand`,price:e[1],product_id:`walmart-${t}-2`},{name:`${t} - Organic`,price:e[2],product_id:`walmart-${t}-3`}]})),s(a);const l={};t.forEach((e=>{l[e]=`walmart-${e}-1`})),c(l)}},b=(e,t)=>{if(t<1)return;const n=d.map(((n,r)=>r===e?{...n,quantity:t}:n));f(n);const r=n.flatMap((e=>Array(e.quantity).fill(e.product_id)));m(`https://affil.walmart.com/cart/addToCart?items=${r.join(",")}`)},v=()=>d.reduce(((e,t)=>e+t.price*t.quantity),0);return l?(0,xt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 p-4",children:(0,xt.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,xt.jsxs)("div",{className:"mb-8",children:[i&&(0,xt.jsxs)("button",{onClick:()=>n("dashboard"),className:"mb-4 flex items-center space-x-2 text-orange-600 hover:text-orange-700 font-medium",children:[(0,xt.jsx)("span",{children:"\u2190"}),(0,xt.jsx)("span",{children:"Back to Dashboard"})]}),(0,xt.jsxs)("div",{className:"text-center",children:[(0,xt.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:l.title||"Delicious Recipe"}),(0,xt.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:l.description||"A wonderful recipe created just for you!"})]})]}),(0,xt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,xt.jsx)("div",{className:"lg:col-span-2",children:(0,xt.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,xt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,xt.jsxs)("div",{className:"text-center p-3 bg-orange-50 rounded-xl",children:[(0,xt.jsx)("div",{className:"text-2xl mb-1",children:"\u23f1\ufe0f"}),(0,xt.jsx)("div",{className:"text-sm text-gray-600",children:"Prep Time"}),(0,xt.jsx)("div",{className:"font-bold text-gray-800",children:l.prep_time||"30 min"})]}),(0,xt.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-xl",children:[(0,xt.jsx)("div",{className:"text-2xl mb-1",children:"\ud83c\udf7d\ufe0f"}),(0,xt.jsx)("div",{className:"text-sm text-gray-600",children:"Servings"}),(0,xt.jsx)("div",{className:"font-bold text-gray-800",children:l.servings||"4"})]}),(0,xt.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-xl",children:[(0,xt.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\udd25"}),(0,xt.jsx)("div",{className:"text-sm text-gray-600",children:"Calories"}),(0,xt.jsx)("div",{className:"font-bold text-gray-800",children:l.calories||"350"})]}),(0,xt.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-xl",children:[(0,xt.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\udcb0"}),(0,xt.jsx)("div",{className:"text-sm text-gray-600",children:"Est. Cost"}),(0,xt.jsxs)("div",{className:"font-bold text-gray-800",children:["$",v().toFixed(2)]})]})]}),(0,xt.jsxs)("div",{className:"mb-8",children:[(0,xt.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,xt.jsx)("span",{className:"mr-2",children:"\ud83e\udd58"}),"Ingredients & Product Selection"]}),h?(0,xt.jsxs)("div",{className:"text-center py-8",children:[(0,xt.jsx)("div",{className:"w-8 h-8 border-3 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),(0,xt.jsx)("p",{className:"text-gray-600",children:"Loading product options from Walmart..."})]}):(0,xt.jsx)("div",{className:"space-y-6",children:Object.entries(o).map(((e,t)=>{let[n,r]=e;const a=u[n];return(0,xt.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,xt.jsxs)("div",{className:"flex items-center mb-3",children:[(0,xt.jsx)("span",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-bold text-sm mr-3",children:t+1}),(0,xt.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:n})]}),r.length>0?(0,xt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:r.slice(0,3).map(((e,t)=>(0,xt.jsxs)("div",{className:"border-2 rounded-lg p-3 cursor-pointer transition-all duration-200 "+(a===e.product_id?"border-green-500 bg-green-50":"border-gray-200 bg-white hover:border-green-300"),onClick:()=>((e,t)=>{var n;const r=null===(n=o[e])||void 0===n?void 0:n.find((e=>e.product_id===t));if(!r)return;const a={...u,[e]:t};c(a);const l=d.map((t=>t.ingredient_name===e?{...t,name:r.name,price:parseFloat(r.price),product_id:r.product_id}:t));f(l);const i=l.flatMap((e=>Array(e.quantity).fill(e.product_id)));m(`https://affil.walmart.com/cart/addToCart?items=${i.join(",")}`),console.log("\u2705 Product selection updated for",e,":",r.name)})(n,e.product_id),children:[(0,xt.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,xt.jsxs)("div",{className:"flex-1",children:[(0,xt.jsx)("h5",{className:"font-medium text-gray-800 text-sm leading-tight mb-1",children:e.name}),(0,xt.jsxs)("p",{className:"text-lg font-bold text-green-600",children:["$",parseFloat(e.price).toFixed(2)]})]}),(0,xt.jsx)("div",{className:"ml-2",children:a===e.product_id?(0,xt.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:(0,xt.jsx)("span",{className:"text-white text-xs",children:"\u2713"})}):(0,xt.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full"})})]}),(0,xt.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:["Product ID: ",e.product_id]}),e.thumbnail_image&&(0,xt.jsx)("img",{src:e.thumbnail_image,alt:e.name,className:"w-full h-16 object-cover rounded",onError:e=>{e.target.style.display="none"}})]},t)))}):(0,xt.jsx)("div",{className:"text-center py-4 text-gray-500",children:(0,xt.jsx)("p",{className:"text-sm",children:"No product options available for this ingredient"})})]},t)}))})]}),(0,xt.jsxs)("div",{children:[(0,xt.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,xt.jsx)("span",{className:"mr-2",children:"\ud83d\udccb"}),"Instructions"]}),(0,xt.jsx)("div",{className:"space-y-4",children:l.instructions&&l.instructions.map(((e,t)=>(0,xt.jsxs)("div",{className:"flex items-start p-4 bg-gray-50 rounded-lg",children:[(0,xt.jsx)("span",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm mr-4 mt-0.5",children:t+1}),(0,xt.jsx)("p",{className:"text-gray-800 leading-relaxed",children:e})]},t)))})]})]})}),(0,xt.jsx)("div",{className:"lg:col-span-1",children:(0,xt.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-4",children:[(0,xt.jsxs)("div",{className:"text-center mb-6",children:[(0,xt.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\ud83d\uded2 Selected Items"}),(0,xt.jsx)("p",{className:"text-sm text-gray-600",children:"Your chosen products from Walmart"})]}),(0,xt.jsx)("div",{className:"space-y-3 mb-6 max-h-64 overflow-y-auto",children:h?(0,xt.jsxs)("div",{className:"text-center py-8",children:[(0,xt.jsx)("div",{className:"w-8 h-8 border-3 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),(0,xt.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading products..."})]}):d.length>0?d.map(((e,t)=>(0,xt.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,xt.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,xt.jsxs)("div",{className:"flex-1",children:[(0,xt.jsx)("h4",{className:"font-medium text-gray-800 text-sm leading-tight mb-1",children:e.name}),(0,xt.jsxs)("p",{className:"text-xs text-gray-500",children:["For: ",e.ingredient_name]})]}),(0,xt.jsx)("button",{onClick:()=>(e=>{const t=d.filter(((t,n)=>n!==e));f(t);const n=t.flatMap((e=>Array(e.quantity).fill(e.product_id)));m(`https://affil.walmart.com/cart/addToCart?items=${n.join(",")}`)})(t),className:"text-red-500 hover:text-red-700 text-xs ml-2",children:"\u2715"})]}),(0,xt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,xt.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,xt.jsx)("button",{onClick:()=>b(t,e.quantity-1),disabled:e.quantity<=1,className:"w-6 h-6 bg-red-500 text-white rounded-full hover:bg-red-600 disabled:opacity-50 flex items-center justify-center text-xs",children:"-"}),(0,xt.jsx)("span",{className:"w-8 text-center font-bold text-sm",children:e.quantity}),(0,xt.jsx)("button",{onClick:()=>b(t,e.quantity+1),className:"w-6 h-6 bg-green-500 text-white rounded-full hover:bg-green-600 flex items-center justify-center text-xs",children:"+"})]}),(0,xt.jsxs)("div",{className:"text-right",children:[(0,xt.jsxs)("div",{className:"font-bold text-green-600",children:["$",(e.price*e.quantity).toFixed(2)]}),(0,xt.jsxs)("div",{className:"text-xs text-gray-500",children:["$",e.price.toFixed(2)," each"]})]})]})]},t))):(0,xt.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,xt.jsx)("p",{children:"No items selected"})})}),(0,xt.jsxs)("div",{className:"border-t pt-4 mb-6",children:[(0,xt.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,xt.jsx)("span",{className:"text-sm text-gray-600",children:"Total Items:"}),(0,xt.jsx)("span",{className:"font-bold",children:d.reduce(((e,t)=>e+t.quantity),0)})]}),(0,xt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,xt.jsx)("span",{className:"text-lg font-bold text-gray-800",children:"Total:"}),(0,xt.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:["$",v().toFixed(2)]})]})]}),(0,xt.jsxs)("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4 mb-4",children:[(0,xt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,xt.jsx)("h4",{className:"font-bold text-yellow-800",children:"\ud83d\udd17 Walmart Affiliate Link"}),(0,xt.jsxs)("div",{className:"flex items-center space-x-2",children:[d.length>0&&!h?(0,xt.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:Object.keys(o).length>0?"Real Products":"Demo Mode"}):(0,xt.jsx)("span",{className:"text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded-full",children:"Loading..."}),(0,xt.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"\ud83d\udcbe Selections Saved"})]})]}),(0,xt.jsx)("textarea",{value:p||"Loading...",readOnly:!0,className:"w-full h-16 p-2 border border-yellow-300 rounded-lg bg-white text-xs resize-none mb-3",onClick:e=>e.target.select()}),(0,xt.jsx)("button",{onClick:async()=>{try{await navigator.clipboard.writeText(p),x("\ud83c\udf89 Walmart link copied! Open new tab and paste to shop. Your selections are saved - you can continue making changes.","success")}catch(e){x("\u274c Failed to copy. Please copy manually from the text box above.","error")}},disabled:!p,className:"w-full bg-yellow-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"\ud83d\udccb Copy Link & Continue Shopping"})]}),(0,xt.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,xt.jsx)("h4",{className:"font-bold text-blue-800 mb-2 text-sm",children:"How to Order:"}),(0,xt.jsxs)("ol",{className:"text-xs text-blue-700 space-y-1",children:[(0,xt.jsx)("li",{children:"1. Select your preferred product for each ingredient"}),(0,xt.jsx)("li",{children:"2. Adjust quantities if needed"}),(0,xt.jsx)("li",{children:'3. Click "Copy Link & Continue Shopping"'}),(0,xt.jsx)("li",{children:"4. Open new tab and paste the link"}),(0,xt.jsx)("li",{children:"5. All selected items will be in your cart"}),(0,xt.jsx)("li",{children:"6. Return here to modify selections anytime"})]}),(0,xt.jsx)("div",{className:"mt-3 p-2 bg-blue-100 rounded-lg",children:(0,xt.jsxs)("p",{className:"text-xs text-blue-600",children:[(0,xt.jsx)("strong",{children:"Persistent Selections:"})," Your product choices remain saved after copying the link. You can continue adjusting quantities, changing products, or generating new URLs as needed."]})})]})]})})]})]})}):(0,xt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 p-4",children:(0,xt.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,xt.jsxs)("div",{className:"text-center py-20",children:[(0,xt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf73"}),(0,xt.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Recipe Found"}),(0,xt.jsx)("p",{className:"text-gray-600",children:"Please generate a recipe first to see the details."})]})})})},T=()=>{const[t,l]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{null!==r&&void 0!==r&&r.id?(async()=>{console.log("\ud83d\udd0d Fetching recipes for user:",r),console.log("\ud83d\udd0d User ID:",null===r||void 0===r?void 0:r.id),console.log("\ud83d\udd0d API URL:",`${e}/api/users/${r.id}/recipes`);try{const t=await vt.get(`${e}/api/users/${r.id}/recipes`);console.log("\u2705 Recipes fetched successfully:",t.data),l(t.data)}catch(t){console.error("\u274c Failed to fetch recipes:",t),x("\u274c Failed to load recipes","error")}finally{o(!1)}})():(console.log("\u26a0\ufe0f No user ID available, not fetching recipes"),o(!1))}),[r]),i?(0,xt.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,xt.jsxs)("div",{className:"text-center",children:[(0,xt.jsx)("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,xt.jsx)("p",{className:"text-gray-600",children:"Loading your recipes..."})]})}):(0,xt.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,xt.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,xt.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,xt.jsx)("button",{onClick:()=>n("dashboard"),className:"text-gray-600 hover:text-gray-800",children:"\u2190 Back"}),(0,xt.jsxs)("div",{children:[(0,xt.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\ud83d\udcda Recipe History"}),(0,xt.jsxs)("p",{className:"text-gray-600 text-sm",children:[t.length," saved recipes"]})]})]}),(0,xt.jsx)("div",{className:"space-y-4",children:0===t.length?(0,xt.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-8 text-center",children:[(0,xt.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udf7d\ufe0f"}),(0,xt.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Recipes Yet"}),(0,xt.jsx)("p",{className:"text-gray-600 mb-4",children:"Generate your first AI recipe to get started!"}),(0,xt.jsx)("button",{onClick:()=>n("generate-recipe"),className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600",children:"Generate Recipe"})]}):t.map((e=>(0,xt.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{window.currentRecipe=e,n("recipe-detail")},children:[(0,xt.jsx)("h3",{className:"font-semibold text-gray-800 mb-1",children:e.title}),(0,xt.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),(0,xt.jsxs)("div",{className:"flex space-x-2 text-xs",children:[(0,xt.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[e.prep_time,"min"]}),(0,xt.jsxs)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:[e.servings," servings"]}),e.calories_per_serving&&(0,xt.jsxs)("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded",children:[e.calories_per_serving," cal"]})]})]},e.id)))})]})})};return(0,xt.jsxs)("div",{className:"relative",children:[(()=>{switch(t){case"landing":default:return(0,xt.jsx)(w,{});case"register":return(0,xt.jsx)(k,{});case"verify-email":return(0,xt.jsx)(S,{});case"login":return(0,xt.jsx)(N,{});case"forgot-password":return(0,xt.jsx)(E,{});case"reset-password":return(0,xt.jsx)(_,{});case"dashboard":return(0,xt.jsx)(j,{});case"generate-recipe":return(0,xt.jsx)(C,{});case"all-recipes":return(0,xt.jsx)(T,{});case"recipe-detail":return(0,xt.jsx)(P,{recipe:window.currentRecipe,showBackButton:!0})}})(),m&&(0,xt.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 rounded-2xl shadow-lg text-white font-medium max-w-sm text-center "+("success"===m.type?"bg-green-500":"bg-red-500"),children:m.message})]})};l.createRoot(document.getElementById("root")).render((0,xt.jsx)(a.StrictMode,{children:(0,xt.jsx)(wt,{})}))})();
//# sourceMappingURL=main.c93b6bab.js.map